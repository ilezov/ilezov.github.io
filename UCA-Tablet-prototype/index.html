<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta charset="utf-8">
<title></title>
<meta name="description" content="">
<meta name="author" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="css/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="css/styles.css">
<!--[if lt IE 9]>
<script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
        <div id="main-wrapper">
            <div id="content-wrapper">
                <header class="navbar navbar-default" role="banner" style="min-height: 55px;margin-bottom: 20px;">
                    <div class="container">
                        <div class="navbar-header">
                            <a class="navbar-brand navbar-brand-usta">
                                <img src="img/BALL-LOGO-WHITE.png" alt="USOPEN">
                            </a>
                        </div>
                        <div class="navbar-app-name">US Open Umpire Crew Assignment System</div>
                        
                    </div>
                </header>
                <div class="form-wrapper">
                    <form action="/UmpireCourtAssignment/CrewChief" class="form-horizontal" data-ajax="true" data-ajax-method="POST" data-ajax-mode="replace" data-ajax-success="window.crewGridFormOnSubmit" data-ajax-update="#grid" data-ajax-url="/UmpireCourtAssignment/CrewChief/Save" id="crewGridForm" method="post" novalidate="novalidate">        <div id="crewDialog">
                        <!-- HIDDEN DATA -->
                        <input type="hidden" name="Id">
                        <!-- MESSAGE AREA -->
                        <div class="error-message-wrapper"></div>

                        <div class="row">
                            <div class="col-md-8 col-md-offset-2">
                                <h4 style="text-align: center;font-weight: bold;font-size: 18px;margin-bottom: 30px;">
                                    Add New Crew Configuration
                                </h4>
                                <!-- COURT -->
                                <div class="form-group">
                                    <label class="control-label col-md-4">Court</label>
                                    <div class="col-md-8">
                                        <select name="CourtId" class="form-control" data-validation-rule="required" aria-required="true">
                                                <option value="1">TEST Ashe</option>
                                                <option value="2">TEST-Grandstand</option>
                                                <option value="1002">TEST-Armstrong</option>
                                                <option value="1004">TEST-Court 17</option>
                                                <option value="1005">TEST-Court 5</option>
                                        </select>
                                    </div>
                                </div>
                                <!-- DAY -->
                                <div class="form-group">
                                    <label class="control-label col-md-4">Day</label>
                                    <div class="col-md-4">
                                        <select class="form-control" disabled="disabled">
                                            <option value="">--</option>
                                                <option value="08/25" selected="">08/25</option>
                                                <option value="08/26">08/26</option>
                                                <option value="08/27">08/27</option>
                                                <option value="08/28">08/28</option>
                                                <option value="08/29">08/29</option>
                                                <option value="08/30">08/30</option>
                                                <option value="08/31">08/31</option>
                                                <option value="09/01">09/01</option>
                                                <option value="09/02">09/02</option>
                                                <option value="09/03">09/03</option>
                                                <option value="09/04">09/04</option>
                                                <option value="09/05">09/05</option>
                                                <option value="09/06">09/06</option>
                                                <option value="09/07">09/07</option>
                                                <option value="09/08">09/08</option>
                                                <option value="09/09">09/09</option>
                                                <option value="09/10">09/10</option>
                                        </select>
                                        <input type="hidden" name="Day" value="08/25">
                                    </div>
                                </div>
                                <!-- NUMBER OF UMPRES -->
                                <div class="form-group">
                                    <label class="control-label col-md-4">
                                        Number of Umpires
                                    </label>
                                    <div class="col-md-6">
                                        <select name="NumberOfUmpire" class="form-control" data-validation-rule="required" aria-required="true">
                                            <option value="">--</option>
                                            <option value="1">Chair + 1</option>
                                            <option value="2">Chair + 2</option>
                                            <option value="3">Chair + 3 (Serve)</option>
                                            <option value="4">Chair + 3 (All Long)</option>
                                            <option value="5">Chair + 4</option>
                                            <option value="6">Chair + 5</option>
                                            <option value="7">Chair + 6 (Rightside Solo)</option>
                                            <option value="8">Chair + 6 (Leftside Solo)</option>
                                            <option value="9">Chair + 7</option>
                                            <option value="10" selected="">Chair + 9</option>
                                        </select>
                                    </div>
                                </div>
                                <!--CREW NUMBER -->
                                <div class="form-group">
                                    <label class="control-label col-md-4">
                                        Crew Number
                                    </label>
                                    <div class="col-md-6">
                                        <select name="CrewNumber" class="form-control" data-validation-rule="required" style="width: 100px" aria-required="true">
                                            <option value="">--</option>
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                            <option value="5">5</option>
                                            
                                        </select>
                                    </div>
                                </div>
                                <!-- BUTTONS -->
                                <div class="text-center">
                                    <input id="savecrewGridForm" type="button" class="btn btn-green" value="Submit Crew Change">
                                    <button type="button" class="btn btn-red" data-dismiss="modal">Cancel</button>
                                </div>
                            </div>
                        </div>
                        <!--
                        <div id="umpires-wrapper" class="row">
                            <div class="col-md-6">
                                <div id="source">
                                    <ul>
                                        <li> Ilya Lezov </li>
                                        <li> Don Roberts </li>
                                        <li> Alex Borodulin </li>
                                    </ul>
                                </div>
                                
                            </div>
                            <div class="col-md-6">
                                <div id="destination">

                                </div>  
                            </div>
                        </div>
                        -->
                        <div id="umpires-assigmnet-control">
                            <div class="col-xs-12 top">
                                <div class="top-wrapper">
                                    <div id="longline" class="item-postion">Long Line</div>
                                    <div id="service" class="item-postion">Service</div>
                                    <div id="soloside" class="item-postion">Solo Side</div>
                                    <div id="farside" class="item-postion">Far Side</div>
                                    <div id="nearside" class="item-postion">Near Side</div>
                                </div>
                            </div>
                            <div class="col-xs-4 left">
                                <div class="left-wrapper">
                                    <div id="leftbase" class="item-postion">Left Base</div>
                                    <div id="leftside" class="item-postion">Left Side</div>
                                    <div id="leftfar" class="item-postion">Left Far</div>
                                    <div id="leftnear" class="item-postion">Left Near</div>
                                    <div id="leftcenter" class="item-postion">Left Center</div>
                                </div>
                            </div>
                            <div class="col-xs-4 center">
                                <div id="source">
                                    <ul>
                                        <li class="umpire"> Ilya Lezov </li>
                                        <li class="umpire"> Don Roberts </li>
                                        <li class="umpire"> Alex Borodulin </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-xs-4 right">
                                <div class="right-wrapper">
                                    <div id="rightbase" class="item-postion">Right Base</div>
                                    <div id="rightside" class="item-postion">Right Side</div>
                                    <div id="rightfar" class="item-postion">Right Far</div>
                                    <div id="rightnear" class="item-postion">Right Near</div>
                                    <div id="rightcenter" class="item-postion">Right Center</div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div> <!-- form-wrapper -->
            </div> <!-- content-wrapper -->
        </div> <!-- main-wrapper -->
    
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/jquery.ui.touch-punch.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script type="text/javascript">
        $(function(){
            var all = ["service", "longline", "soloside", "farside", "nearside", "leftbase", "leftfar", "leftnear", "leftcenter", "rightbase", "rightfar", "rightnear", "rightcenter", "rightside", "leftside"]

        
            var map = [
                ["longline"], //1
                ["rightside", "leftside"], //2
                ["service","rightside", "leftside"], //3
                ["soloside", "farside", "nearside"], //4
                ["service", "soloside", "farside", "nearside"], //5
                ["service", "rightbase", "leftbase", "rightside", "leftside"], //6
                ["service", "rightbase", "leftbase", "soloside", "farside", "nearside"], //7
                ["service", "rightbase", "leftbase", "soloside", "farside", "nearside"], //8
                ["service", "leftbase", "leftfar", "leftnear", "rightbase", "rightfar", "rightnear"], //9
                ["service", "leftbase", "leftfar", "leftnear", "leftcenter", "rightbase", "rightfar", "rightnear", "rightcenter"], //10
            ];

            var adjustPositions = function(){
                $.each(all, function(index, el){
                    $('#' + el).hide();
                });
                
                var selectedIndex = (parseInt($('select[name="NumberOfUmpire"]').val()) - 1);
                
                $.each(map[selectedIndex], function(index, el){
                    $('#' + el).show();
                });
            };

            var umpires = ['Ilya Lezov', 'Alex Borodulin', 'Don Roberts'];

            var resetUmpires = function(){
                $('#source ul').html('');
                $.each(umpires, function(index, el){
                    $('#source ul').append('<li class="umpire">'+el+'</li>');
                });

                $('#source li').draggable({
                    revert: "invalid", // when not dropped, the item will revert back to its initial position
                    containment: "document",
                    helper: "clone",
                    cursor: "move"
                });

                $('.item-postion').each(function(index, el){
                    $(el).find('ul').remove();
                    $(el).removeClass('assigned');
                });
            }

            adjustPositions();
            $(document).on('change', 'select[name="NumberOfUmpire"]', function(){
                resetUmpires();
                adjustPositions();
            });

            

            

            var $source = $( "#source" );
                
            
            $( "li", $source ).draggable({
                    
                revert: "invalid", // when not dropped, the item will revert back to its initial position
                containment: "document",
                helper: "clone",
                cursor: "move"
            });
            

            function moveItem( $item, $dropTarget ) {
                
                $item.fadeOut(function() {
                    
                    var $list = $dropTarget.find('ul').length ?
                    $dropTarget.find('ul') :
                    $( "<ul/>" ).appendTo( $dropTarget );
                    $item.appendTo( $list );
                    $item.show();

                    
                    $('.item-postion').each(function(index, el){
                        if($(el).find('.umpire').length > 0){
                            $(el).addClass('assigned');    
                        }
                        else{
                            $(el).removeClass('assigned');   
                        }
                    });

                });
            }

            $('#source').droppable({
                    accept: ".item-postion li",
                    classes: {
                        "ui-droppable-active": "ui-state-highlight"
                    },
                    drop: function( event, ui ) {
                        var $dropTarget = $( '#' + this.id );
                        moveItem( ui.draggable, $dropTarget );
                    }
                });

            $('.item-postion').each(function(index, el){
                $(el).droppable({
                    accept: "#source li, .item-postion li",
                    classes: {
                        "ui-droppable-active": "ui-state-highlight"
                    },
                    drop: function( event, ui ) {
                        var $dropTarget = $( '#' + this.id );

                        
                        if(this.id != "source"){
                            if($(this).find('.umpire').length >= 1){
                                
                                ui.draggable.draggable('option','revert',true);
                                return;
                            }
                            else{
                                moveItem( ui.draggable, $dropTarget );
                            }
                        }
                        else{
                            if(ui.draggable.parent().parent().attr('id') != 'source'){
                                moveItem( ui.draggable, $dropTarget );
                            }
                            else{
                                ui.draggable.draggable('option','revert',true);
                            }
                            
                        }

                        
                        
                    }
                });
            });

            $('.item-postion').each(function(index, el){
                $( "li", $(el) ).draggable({
                    
                    revert: "invalid", // when not dropped, the item will revert back to its initial position
                    containment: "document",
                    helper: "clone",
                    cursor: "move"
                });
            });
        });
    </script>
</body>
</html>